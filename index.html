<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width">
	<meta name="description" content="">

	<title></title>
	<style>
	.person{
		margin: 15px;
		padding: 15px;
	}
	</style>

</head>
<body>

	<div class="page">
	</div>

</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
var docId = "1W3S_j9vi58Y5BMTPLdWptTQwScMWv5KrkU-r9R2_dvU";
var url = "https://spreadsheets.google.com/feeds/list/" + docId + "/od6/public/values?alt=json-in-script&callback=?";
var directoryData;

jQuery.getJSON(url).success(function(data) {
	console.log(data); 
	directoryData = data.feed.entry;
	createDirectory(directoryData);
}).error(function(message) {
	console.error('error' + message); 
	$('.page').append('error' + message);
}).complete(function() {
	console.log('completed!'); 
});

function createDirectory(people){
	for (var i =0; i < people.length; i++){
		console.log("run loop");

		var bio = people[i].gsx$bio.$t;

		var ggj14 = people[i].gsx$ggj14.$t;
		var ggj15 = people[i].gsx$ggj15.$t;
		var github = people[i].gsx$github.$t;
		var googleplus = people[i].gsx$googleplus.$t;
		var ld29 = people[i].gsx$ld29.$t;
		var ld30 = people[i].gsx$ld30.$t;
		var ld31 = people[i].gsx$ld31.$t;
		var projects = people[i].gsx$projects.$t;
		var seeking = people[i].gsx$seeking.$t;
		var skills = people[i].gsx$skills.$t;
		var steam = people[i].gsx$steam.$t;
		var studio = people[i].gsx$studio.$t;
		var tumblr = people[i].gsx$tumblr.$t;
		var twitter = people[i].gsx$twitter.$t;
		var website = people[i].gsx$website.$t;


		$('.page').append("<div class='person'>"  
			+ addGravitar(people[i]) 
			+ addName(people[i])
			+ "<p><strong>Studio:</strong> " + studio + "</p>" 
			+ "<strong>Bio:</strong> " + bio + "</p>" 
			+ "<p><strong>Projects:</strong> " + projects + "</p>" 
			+ "<p><strong>Seeking:</strong> " + seeking + "</p>" 
			+ "<p><strong>Skills:</strong> " + skills + "</p>" 
			+ "<p><strong>Website:</strong> " + "<a href='" + website + "' target='_blank'>"+ website + "</a>"+ "</p>"
			+ "<p><strong>Twitter:</strong> " + "<a href='" + twitter + "' target='_blank'>"+ twitter + "</a>"+ "</p>"
			+ "<p><strong>Github:</strong> " + "<a href='" + github + "' target='_blank'>"+ github + "</a>"+ "</p>"
			+ "<p><strong>Tumblr:</strong> " + "<a href='" + tumblr + "' target='_blank'>"+ tumblr + "</a>"+ "</p>"
			+ "<p><strong>G+:</strong> " + "<a href='" + googleplus + "' target='_blank'>"+ googleplus + "</a>"+ "</p>"
			+ "<p><strong>Steam:</strong> " + steam + "</p>" 
		//ggj14 + " " + 
		//ggj15 + " " + 
		//ld29 + " " + 
		//ld30 + " " + 
		//ld31 + " " +
		+"</div>");
}
}

function addName(person){
	var name = "<h3>";
	var firstname = person.gsx$firstname.$t;
	var lastname = person.gsx$lastname.$t;
	var nicknames = person.gsx$nicknames.$t;
	if(truthy(firstname)) {
		name += firstname + " ";
	}
	if(truthy(nicknames)) {
		name += "'"+nicknames+"' ";
	}
	if(truthy(lastname)) {
		name += lastname;
	}
	return name + "</h3>";
}

function truthy(variable) {
	if(variable == undefined || variable == " " || variable == null){
		return false;
	}
	return true;
}

function addGravitar(person) {
	var email = person.gsx$email.$t;
	return "<img src='http://gravatar.com/avatar/" + calcMD5(email) + "'></img>";
}

function addEmail(person) {
	var email = person.gsx$email.$t;
	return "<p><strong>Email:</strong> " + email + "</p>";
}


// MD5 hashing for gravitar :p
var hex_chr="0123456789abcdef";function rhex(num){str="";for(j=0;j<=3;j++)str+=hex_chr.charAt((num>>(j*8+4))&0x0F)+hex_chr.charAt((num>>(j*8))&0x0F);return str}function str2blks_MD5(str){nblk=((str.length+8)>>6)+1;blks=new Array(nblk*16);for(i=0;i<nblk*16;i++)blks[i]=0;for(i=0;i<str.length;i++)blks[i>>2]|=str.charCodeAt(i)<<((i%4)*8);blks[i>>2]|=0x80<<((i%4)*8);blks[nblk*16-2]=str.length*8;return blks}function add(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF)}function rol(num,cnt){return(num<<cnt)|(num>>>(32-cnt))}function cmn(q,a,b,x,s,t){return add(rol(add(add(a,q),add(x,t)),s),b)}function ff(a,b,c,d,x,s,t){return cmn((b&c)|((~b)&d),a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn((b&d)|(c&(~d)),a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|(~d)),a,b,x,s,t)}function calcMD5(str){x=str2blks_MD5(str);a=1732584193;b=-271733879;c=-1732584194;d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=ff(a,b,c,d,x[i+0],7,-680876936);d=ff(d,a,b,c,x[i+1],12,-389564586);c=ff(c,d,a,b,x[i+2],17,606105819);b=ff(b,c,d,a,x[i+3],22,-1044525330);a=ff(a,b,c,d,x[i+4],7,-176418897);d=ff(d,a,b,c,x[i+5],12,1200080426);c=ff(c,d,a,b,x[i+6],17,-1473231341);b=ff(b,c,d,a,x[i+7],22,-45705983);a=ff(a,b,c,d,x[i+8],7,1770035416);d=ff(d,a,b,c,x[i+9],12,-1958414417);c=ff(c,d,a,b,x[i+10],17,-42063);b=ff(b,c,d,a,x[i+11],22,-1990404162);a=ff(a,b,c,d,x[i+12],7,1804603682);d=ff(d,a,b,c,x[i+13],12,-40341101);c=ff(c,d,a,b,x[i+14],17,-1502002290);b=ff(b,c,d,a,x[i+15],22,1236535329);a=gg(a,b,c,d,x[i+1],5,-165796510);d=gg(d,a,b,c,x[i+6],9,-1069501632);c=gg(c,d,a,b,x[i+11],14,643717713);b=gg(b,c,d,a,x[i+0],20,-373897302);a=gg(a,b,c,d,x[i+5],5,-701558691);d=gg(d,a,b,c,x[i+10],9,38016083);c=gg(c,d,a,b,x[i+15],14,-660478335);b=gg(b,c,d,a,x[i+4],20,-405537848);a=gg(a,b,c,d,x[i+9],5,568446438);d=gg(d,a,b,c,x[i+14],9,-1019803690);c=gg(c,d,a,b,x[i+3],14,-187363961);b=gg(b,c,d,a,x[i+8],20,1163531501);a=gg(a,b,c,d,x[i+13],5,-1444681467);d=gg(d,a,b,c,x[i+2],9,-51403784);c=gg(c,d,a,b,x[i+7],14,1735328473);b=gg(b,c,d,a,x[i+12],20,-1926607734);a=hh(a,b,c,d,x[i+5],4,-378558);d=hh(d,a,b,c,x[i+8],11,-2022574463);c=hh(c,d,a,b,x[i+11],16,1839030562);b=hh(b,c,d,a,x[i+14],23,-35309556);a=hh(a,b,c,d,x[i+1],4,-1530992060);d=hh(d,a,b,c,x[i+4],11,1272893353);c=hh(c,d,a,b,x[i+7],16,-155497632);b=hh(b,c,d,a,x[i+10],23,-1094730640);a=hh(a,b,c,d,x[i+13],4,681279174);d=hh(d,a,b,c,x[i+0],11,-358537222);c=hh(c,d,a,b,x[i+3],16,-722521979);b=hh(b,c,d,a,x[i+6],23,76029189);a=hh(a,b,c,d,x[i+9],4,-640364487);d=hh(d,a,b,c,x[i+12],11,-421815835);c=hh(c,d,a,b,x[i+15],16,530742520);b=hh(b,c,d,a,x[i+2],23,-995338651);a=ii(a,b,c,d,x[i+0],6,-198630844);d=ii(d,a,b,c,x[i+7],10,1126891415);c=ii(c,d,a,b,x[i+14],15,-1416354905);b=ii(b,c,d,a,x[i+5],21,-57434055);a=ii(a,b,c,d,x[i+12],6,1700485571);d=ii(d,a,b,c,x[i+3],10,-1894986606);c=ii(c,d,a,b,x[i+10],15,-1051523);b=ii(b,c,d,a,x[i+1],21,-2054922799);a=ii(a,b,c,d,x[i+8],6,1873313359);d=ii(d,a,b,c,x[i+15],10,-30611744);c=ii(c,d,a,b,x[i+6],15,-1560198380);b=ii(b,c,d,a,x[i+13],21,1309151649);a=ii(a,b,c,d,x[i+4],6,-145523070);d=ii(d,a,b,c,x[i+11],10,-1120210379);c=ii(c,d,a,b,x[i+2],15,718787259);b=ii(b,c,d,a,x[i+9],21,-343485551);a=add(a,olda);b=add(b,oldb);c=add(c,oldc);d=add(d,oldd)}return rhex(a)+rhex(b)+rhex(c)+rhex(d)}
</script>
</html>



